schema_version: "0.1.0"
id: telemetry/log-work
name: Log Work
summary: "Generates a U.Work record for an action (Pattern A.15.1)."
intent:
  goal: "Generate a U.Work record for a specific action."
  non_goals:
    - "Does not perform the work; only records it."
    - "Does not upload or sync work logs to external systems."
    - "Does not add details not provided in inputs."
inputs:
  - name: spec
    type: string
    description: "Method or pattern identifier for the work being recorded."
    required: true
  - name: role
    type: string
    description: "Role assignment performing the work."
    required: true
  - name: context
    type: string
    description: "Bounded context used to resolve the runtime work log directory."
    required: true
  - name: action
    type: string
    description: "Description of the work performed."
    required: true
outputs:
  - name: work_record_path
    type: string
    description: "Path to the generated U.Work markdown file."
procedure:
  - step_id: step-validate-inputs
    instruction: "Validate required inputs: spec, role, context, action."
  - step_id: step-resolve-target
    instruction: "Resolve runtime/contexts/<context>/telemetry/work and create it if missing."
  - step_id: step-build-content
    instruction: "Construct the U.Work markdown content using the provided inputs and timestamps."
  - step_id: step-write-file
    instruction: "Write the U.Work markdown file using a timestamped filename."
constraints:
  safety:
    - "Use timestamp-based filenames to avoid collisions."
    - "Do not overwrite existing work log files."
  privacy:
    - "Do not include secrets or personal data in the work record."
    - "If inputs contain sensitive data, redact before writing."
  licensing:
    - "Do not copy proprietary text; author original summaries."
dependencies:
  tools:
    - write_to_file
    - run_command
  skills: []
eval:
  acceptance_criteria:
    - "Creates a markdown file under runtime/contexts/<context>/telemetry/work/."
    - "The record includes spec, role, context, and action values."
    - "The filename is timestamp-based to avoid collisions."
  tests:
    - name: basic-log
      input_fixture:
        spec: "A.15.1"
        role: "Archivist"
        context: "Tooling"
        action: "Validated skill inventory generation."
      expected:
        work_record_path: "runtime/contexts/Tooling/telemetry/work/work-<timestamp>.md"
      notes: "The filename includes an ISO timestamp; verify directory + prefix."
    - name: basic-log-2
      input_fixture:
        spec: "F.18"
        role: "Archivist"
        context: "Skills"
        action: "Minted Name Card 'Example Concept' (example-concept)."
      expected:
        work_record_path: "runtime/contexts/Skills/telemetry/work/work-<timestamp>.md"
      notes: "The filename includes an ISO timestamp; verify directory + prefix."
version: "0.1.0"
metadata:
  tags:
    - telemetry
  authors:
    - "FPF Foundry"
  created: "2026-01-12"
  updated: "2026-01-12"
failure_modes:
  - "Missing required inputs (spec, role, context, action)."
  - "Failed to create or access runtime/contexts/<context>/telemetry/work."
  - "Failed to write work record file."
